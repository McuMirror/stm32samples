(kicad_sch
	(version 20240101)
	(generator "eeschema")
	(generator_version "8.99")
	(uuid "c774fcd8-2321-49e3-82b6-f080291ee83c")
	(paper "A4")
	(title_block
		(date "2024-03-18")
		(company "SAO RAS")
		(comment 1 "Instead of PEP controller")
	)
	(lib_symbols
		(symbol "Device:R"
			(pin_numbers hide)
			(pin_names
				(offset 0)
			)
			(exclude_from_sim no)
			(in_bom yes)
			(on_board yes)
			(property "Reference" "R"
				(at 2.032 0 90)
				(effects
					(font
						(size 1.27 1.27)
					)
				)
			)
			(property "Value" "R"
				(at 0 0 90)
				(effects
					(font
						(size 1.27 1.27)
					)
				)
			)
			(property "Footprint" ""
				(at -1.778 0 90)
				(effects
					(font
						(size 1.27 1.27)
					)
					(hide yes)
				)
			)
			(property "Datasheet" "~"
				(at 0 0 0)
				(effects
					(font
						(size 1.27 1.27)
					)
					(hide yes)
				)
			)
			(property "Description" "Resistor"
				(at 0 0 0)
				(effects
					(font
						(size 1.27 1.27)
					)
					(hide yes)
				)
			)
			(property "ki_keywords" "R res resistor"
				(at 0 0 0)
				(effects
					(font
						(size 1.27 1.27)
					)
					(hide yes)
				)
			)
			(property "ki_fp_filters" "R_*"
				(at 0 0 0)
				(effects
					(font
						(size 1.27 1.27)
					)
					(hide yes)
				)
			)
			(symbol "R_0_1"
				(rectangle
					(start -1.016 -2.54)
					(end 1.016 2.54)
					(stroke
						(width 0.254)
						(type default)
					)
					(fill
						(type none)
					)
				)
			)
			(symbol "R_1_1"
				(pin passive line
					(at 0 3.81 270)
					(length 1.27)
					(name "~"
						(effects
							(font
								(size 1.27 1.27)
							)
						)
					)
					(number "1"
						(effects
							(font
								(size 1.27 1.27)
							)
						)
					)
				)
				(pin passive line
					(at 0 -3.81 90)
					(length 1.27)
					(name "~"
						(effects
							(font
								(size 1.27 1.27)
							)
						)
					)
					(number "2"
						(effects
							(font
								(size 1.27 1.27)
							)
						)
					)
				)
			)
		)
		(symbol "Isolator:PC817"
			(pin_names
				(offset 1.016)
			)
			(exclude_from_sim no)
			(in_bom yes)
			(on_board yes)
			(property "Reference" "U"
				(at -5.08 5.08 0)
				(effects
					(font
						(size 1.27 1.27)
					)
					(justify left)
				)
			)
			(property "Value" "PC817"
				(at 0 5.08 0)
				(effects
					(font
						(size 1.27 1.27)
					)
					(justify left)
				)
			)
			(property "Footprint" "Package_DIP:DIP-4_W7.62mm"
				(at -5.08 -5.08 0)
				(effects
					(font
						(size 1.27 1.27)
						(italic yes)
					)
					(justify left)
					(hide yes)
				)
			)
			(property "Datasheet" "http://www.soselectronic.cz/a_info/resource/d/pc817.pdf"
				(at 0 0 0)
				(effects
					(font
						(size 1.27 1.27)
					)
					(justify left)
					(hide yes)
				)
			)
			(property "Description" "DC Optocoupler, Vce 35V, CTR 50-300%, DIP-4"
				(at 0 0 0)
				(effects
					(font
						(size 1.27 1.27)
					)
					(hide yes)
				)
			)
			(property "ki_keywords" "NPN DC Optocoupler"
				(at 0 0 0)
				(effects
					(font
						(size 1.27 1.27)
					)
					(hide yes)
				)
			)
			(property "ki_fp_filters" "DIP*W7.62mm*"
				(at 0 0 0)
				(effects
					(font
						(size 1.27 1.27)
					)
					(hide yes)
				)
			)
			(symbol "PC817_0_1"
				(rectangle
					(start -5.08 3.81)
					(end 5.08 -3.81)
					(stroke
						(width 0.254)
						(type default)
					)
					(fill
						(type background)
					)
				)
				(polyline
					(pts
						(xy -3.175 -0.635) (xy -1.905 -0.635)
					)
					(stroke
						(width 0.254)
						(type default)
					)
					(fill
						(type none)
					)
				)
				(polyline
					(pts
						(xy 2.54 0.635) (xy 4.445 2.54)
					)
					(stroke
						(width 0)
						(type default)
					)
					(fill
						(type none)
					)
				)
				(polyline
					(pts
						(xy 4.445 -2.54) (xy 2.54 -0.635)
					)
					(stroke
						(width 0)
						(type default)
					)
					(fill
						(type outline)
					)
				)
				(polyline
					(pts
						(xy 4.445 -2.54) (xy 5.08 -2.54)
					)
					(stroke
						(width 0)
						(type default)
					)
					(fill
						(type none)
					)
				)
				(polyline
					(pts
						(xy 4.445 2.54) (xy 5.08 2.54)
					)
					(stroke
						(width 0)
						(type default)
					)
					(fill
						(type none)
					)
				)
				(polyline
					(pts
						(xy -5.08 2.54) (xy -2.54 2.54) (xy -2.54 -0.635)
					)
					(stroke
						(width 0)
						(type default)
					)
					(fill
						(type none)
					)
				)
				(polyline
					(pts
						(xy -2.54 -0.635) (xy -2.54 -2.54) (xy -5.08 -2.54)
					)
					(stroke
						(width 0)
						(type default)
					)
					(fill
						(type none)
					)
				)
				(polyline
					(pts
						(xy 2.54 1.905) (xy 2.54 -1.905) (xy 2.54 -1.905)
					)
					(stroke
						(width 0.508)
						(type default)
					)
					(fill
						(type none)
					)
				)
				(polyline
					(pts
						(xy -2.54 -0.635) (xy -3.175 0.635) (xy -1.905 0.635) (xy -2.54 -0.635)
					)
					(stroke
						(width 0.254)
						(type default)
					)
					(fill
						(type none)
					)
				)
				(polyline
					(pts
						(xy -0.508 -0.508) (xy 0.762 -0.508) (xy 0.381 -0.635) (xy 0.381 -0.381) (xy 0.762 -0.508)
					)
					(stroke
						(width 0)
						(type default)
					)
					(fill
						(type none)
					)
				)
				(polyline
					(pts
						(xy -0.508 0.508) (xy 0.762 0.508) (xy 0.381 0.381) (xy 0.381 0.635) (xy 0.762 0.508)
					)
					(stroke
						(width 0)
						(type default)
					)
					(fill
						(type none)
					)
				)
				(polyline
					(pts
						(xy 3.048 -1.651) (xy 3.556 -1.143) (xy 4.064 -2.159) (xy 3.048 -1.651) (xy 3.048 -1.651)
					)
					(stroke
						(width 0)
						(type default)
					)
					(fill
						(type outline)
					)
				)
			)
			(symbol "PC817_1_1"
				(pin passive line
					(at -7.62 2.54 0)
					(length 2.54)
					(name "~"
						(effects
							(font
								(size 1.27 1.27)
							)
						)
					)
					(number "1"
						(effects
							(font
								(size 1.27 1.27)
							)
						)
					)
				)
				(pin passive line
					(at -7.62 -2.54 0)
					(length 2.54)
					(name "~"
						(effects
							(font
								(size 1.27 1.27)
							)
						)
					)
					(number "2"
						(effects
							(font
								(size 1.27 1.27)
							)
						)
					)
				)
				(pin passive line
					(at 7.62 -2.54 180)
					(length 2.54)
					(name "~"
						(effects
							(font
								(size 1.27 1.27)
							)
						)
					)
					(number "3"
						(effects
							(font
								(size 1.27 1.27)
							)
						)
					)
				)
				(pin passive line
					(at 7.62 2.54 180)
					(length 2.54)
					(name "~"
						(effects
							(font
								(size 1.27 1.27)
							)
						)
					)
					(number "4"
						(effects
							(font
								(size 1.27 1.27)
							)
						)
					)
				)
			)
		)
	)
	(wire
		(pts
			(xy 129.413 54.229) (xy 124.46 54.229)
		)
		(stroke
			(width 0)
			(type default)
		)
		(uuid "2f25ebff-821d-424a-a5e6-7aaeb1db0afa")
	)
	(wire
		(pts
			(xy 124.46 59.309) (xy 129.286 59.309)
		)
		(stroke
			(width 0)
			(type default)
		)
		(uuid "f4fc9d10-1e63-4e24-a02b-556e4b39b19c")
	)
	(hierarchical_label "EXT5V"
		(shape input)
		(at 109.22 46.609 0)
		(fields_autoplaced yes)
		(effects
			(font
				(size 1.27 1.27)
			)
			(justify left)
		)
		(uuid "0b20c453-dee8-4cc6-90fe-d346e6222768")
	)
	(hierarchical_label "In"
		(shape input)
		(at 129.413 54.229 0)
		(fields_autoplaced yes)
		(effects
			(font
				(size 1.27 1.27)
			)
			(justify left)
		)
		(uuid "8e6bd8d7-45cc-4e50-9857-61670736c481")
	)
	(hierarchical_label "gnd"
		(shape input)
		(at 129.286 59.309 0)
		(fields_autoplaced yes)
		(effects
			(font
				(size 1.27 1.27)
			)
			(justify left)
		)
		(uuid "ab6c4d70-58f2-4e0b-88e2-6f2d9aeddb16")
	)
	(hierarchical_label "EXTi"
		(shape input)
		(at 109.22 59.309 180)
		(fields_autoplaced yes)
		(effects
			(font
				(size 1.27 1.27)
			)
			(justify right)
		)
		(uuid "c868a95d-cc21-426a-9cfd-3f9543b753be")
	)
	(symbol
		(lib_id "Device:R")
		(at 109.22 50.419 0)
		(unit 1)
		(exclude_from_sim no)
		(in_bom yes)
		(on_board yes)
		(dnp no)
		(uuid "09735fc2-1580-4524-a728-ca09449b348a")
		(property "Reference" "R31"
			(at 110.998 49.5843 0)
			(effects
				(font
					(size 1.27 1.27)
				)
				(justify left)
			)
		)
		(property "Value" "3k3"
			(at 109.093 51.943 90)
			(effects
				(font
					(size 1.27 1.27)
				)
				(justify left)
			)
		)
		(property "Footprint" "Resistor_SMD:R_2010_5025Metric_Pad1.40x2.65mm_HandSolder"
			(at 107.442 50.419 90)
			(effects
				(font
					(size 1.27 1.27)
				)
				(hide yes)
			)
		)
		(property "Datasheet" "~"
			(at 109.22 50.419 0)
			(effects
				(font
					(size 1.27 1.27)
				)
				(hide yes)
			)
		)
		(property "Description" ""
			(at 109.22 50.419 0)
			(effects
				(font
					(size 1.27 1.27)
				)
				(hide yes)
			)
		)
		(pin "1"
			(uuid "d8e2831f-0444-4eb0-a255-0be00f3eb495")
		)
		(pin "2"
			(uuid "450e036f-cbf0-46f9-86d8-88929d707ae4")
		)
		(instances
			(project "stm32"
				(path "/f40cbe7e-cd25-45e5-a6cb-d92457495048/311a5cb3-0370-4a86-a5e8-6335fee47f9a"
					(reference "R31")
					(unit 1)
				)
				(path "/f40cbe7e-cd25-45e5-a6cb-d92457495048/2b18f3bb-219b-4cc5-8bc9-bc122d6e81e9"
					(reference "R35")
					(unit 1)
				)
				(path "/f40cbe7e-cd25-45e5-a6cb-d92457495048/c51c7789-4b67-42c9-a921-b1066b3f95ba"
					(reference "R37")
					(unit 1)
				)
				(path "/f40cbe7e-cd25-45e5-a6cb-d92457495048/737c47dd-2cc5-4c23-ab54-7bef18beb2a3"
					(reference "R32")
					(unit 1)
				)
				(path "/f40cbe7e-cd25-45e5-a6cb-d92457495048/0ff6ac13-ac49-41f0-9506-376ccd8b8ba4"
					(reference "R33")
					(unit 1)
				)
				(path "/f40cbe7e-cd25-45e5-a6cb-d92457495048/1cf77ae7-411e-49cc-bbff-6947c0aa32bd"
					(reference "R34")
					(unit 1)
				)
				(path "/f40cbe7e-cd25-45e5-a6cb-d92457495048/d7c9ec36-f6b4-4bc2-8e9a-7a0792b9eff0"
					(reference "R36")
					(unit 1)
				)
				(path "/f40cbe7e-cd25-45e5-a6cb-d92457495048/e5255d96-2d32-432c-bf31-9afa6ac7ec6a"
					(reference "R38")
					(unit 1)
				)
			)
		)
	)
	(symbol
		(lib_id "Isolator:PC817")
		(at 116.84 56.769 0)
		(unit 1)
		(exclude_from_sim no)
		(in_bom yes)
		(on_board yes)
		(dnp no)
		(fields_autoplaced yes)
		(uuid "400c154c-5d09-4b90-bd4d-4cdbee68e158")
		(property "Reference" "U11"
			(at 116.84 49.2592 0)
			(effects
				(font
					(size 1.27 1.27)
				)
			)
		)
		(property "Value" "PC817"
			(at 116.84 51.7961 0)
			(effects
				(font
					(size 1.27 1.27)
				)
			)
		)
		(property "Footprint" "Package_DIP:DIP-4_W7.62mm"
			(at 111.76 61.849 0)
			(effects
				(font
					(size 1.27 1.27)
					(italic yes)
				)
				(justify left)
				(hide yes)
			)
		)
		(property "Datasheet" "http://www.soselectronic.cz/a_info/resource/d/pc817.pdf"
			(at 116.84 56.769 0)
			(effects
				(font
					(size 1.27 1.27)
				)
				(justify left)
				(hide yes)
			)
		)
		(property "Description" ""
			(at 116.84 56.769 0)
			(effects
				(font
					(size 1.27 1.27)
				)
				(hide yes)
			)
		)
		(pin "1"
			(uuid "91cf025a-067c-492c-bcee-1aa442b5190b")
		)
		(pin "2"
			(uuid "92a29dae-4114-4ac4-b292-3f9303033fe3")
		)
		(pin "3"
			(uuid "22931c93-52d3-4f9e-a51a-72db694a5d75")
		)
		(pin "4"
			(uuid "493f9777-02f4-4e33-a6e5-ec3981392cf3")
		)
		(instances
			(project "stm32"
				(path "/f40cbe7e-cd25-45e5-a6cb-d92457495048/311a5cb3-0370-4a86-a5e8-6335fee47f9a"
					(reference "U11")
					(unit 1)
				)
				(path "/f40cbe7e-cd25-45e5-a6cb-d92457495048/2b18f3bb-219b-4cc5-8bc9-bc122d6e81e9"
					(reference "U15")
					(unit 1)
				)
				(path "/f40cbe7e-cd25-45e5-a6cb-d92457495048/c51c7789-4b67-42c9-a921-b1066b3f95ba"
					(reference "U17")
					(unit 1)
				)
				(path "/f40cbe7e-cd25-45e5-a6cb-d92457495048/737c47dd-2cc5-4c23-ab54-7bef18beb2a3"
					(reference "U12")
					(unit 1)
				)
				(path "/f40cbe7e-cd25-45e5-a6cb-d92457495048/0ff6ac13-ac49-41f0-9506-376ccd8b8ba4"
					(reference "U13")
					(unit 1)
				)
				(path "/f40cbe7e-cd25-45e5-a6cb-d92457495048/1cf77ae7-411e-49cc-bbff-6947c0aa32bd"
					(reference "U14")
					(unit 1)
				)
				(path "/f40cbe7e-cd25-45e5-a6cb-d92457495048/d7c9ec36-f6b4-4bc2-8e9a-7a0792b9eff0"
					(reference "U16")
					(unit 1)
				)
				(path "/f40cbe7e-cd25-45e5-a6cb-d92457495048/e5255d96-2d32-432c-bf31-9afa6ac7ec6a"
					(reference "U18")
					(unit 1)
				)
			)
		)
	)
)